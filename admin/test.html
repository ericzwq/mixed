<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    :root {
      --text-color: red;
    }

    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }

    button {
      position: relative;
      outline: none;
      padding: 10px;
      background: red;
      cursor: pointer;
      color: #fff;
      border: none;
    }

    button:before {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      background: #000;
      border-radius: inherit;
      transform: translate(-50%, -50%);
      opacity: 0;
      content: " ";
    }

    button:active:before {
      opacity: 0.1;
    }
  </style>
</head>
<body>
<button>按钮</button>
<script>
  const k = 'key'
  const o = {
    age: 3,
    s: '2',
    f() {},
    [k]: k
  }
  let a, b, c, d, e, ff, g, obj;
  ({[k]: a, c = 1, x: {e, y: ff, ...g} = {e: 4, z: 0, age: 2}, age: b, p: d, base: d, ...obj} = {a: 1, ...o});
  //    [a = 2, ...[c]] = [1, 3, 4] // todo
  console.log(a, b, c, d, e, ff, g, obj)
</script>
<script>
  'use strict'

  // document.querySelector('.a')
  //  const codes = [{key: 'document', type: 'attr'}, {key: 'querySelector', type: 'func', params: ['.a']}, {type: 'symbol'}]
  const codes = [{key: '$', type: 'func', params: ['.a']}, {key: '||', type: 'symbol'}, {key: '$', type: 'func', params: ['button']}]
  const symbolMap = {
    '||': (a, b) => a || b,
    '&&': (a, b) => a && b,
    '+': (a, b) => a + b,
    '-': (a, b) => a - b,
    '*': (a, b) => a * b,
    '/': (a, b) => a / b,
  }
  const key2TypeMap = {}
  const map = {
    document,
    window
  }
  const typeMap = {
    attr: (ctx, key, codes, i) => ctx[key],
    func: (ctx, key, codes, i, params) => ctx[key](params),
    symbol: (ctx, key, codes, i) => symbolMap[key]([ctx, exec(codes.slice(i + 1))])
  }
  window.$ = document.querySelector
  window.$all = document.querySelectorAll

  function exec(codes) {
    let ctx = window
    for (let i = 0, l = codes.length; i < l; i++) {
      const {key, type, params} = codes[i]
      ctx = typeMap[type](ctx, key, codes, i, params)

    }
    console.log(ctx)
    return ctx
  }

</script>
<script>
  function Node(val, next) {
    this.val = val
    this.next = next
  }

  //                   8
  //          6                   10
  //     5         7          9         11
  // console.log(test({
  //   val: 8,
  //   left: {val: 6, left: {val: 5}, right: {val: 7.5}},
  //   right: {val: 10, left: {val: 9}, right: {val: 11}}
  // }, 12))


  let node0 = new Node(0), node1 = new Node(1), node2 = new Node(2), node3 = new Node(3), node4 = new Node(4),
      node5 = new Node(5), node6 = new Node(6), node7 = new Node(7), node8 = new Node(8)


  f()

  // f2()
  function getRan(s = 0, e = 10) {
    return Math.floor(Math.random() * e) + s
  }

  function f() {
    let t = Date.now(), cur = 3, max = 10
    for (let i = 0; i < 3000000; i++) {
      Math.random()
    }
    console.log(Date.now() - t, 't')
  }

  function f2() {
    let t2 = Date.now(), cur = 3, max = 10
    for (let i = 0; i < 3000000; i++) {
      Date.now()
    }
    console.log(Date.now() - t2, 't2')
  }
</script>
</body>
</html>

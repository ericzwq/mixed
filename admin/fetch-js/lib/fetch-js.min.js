function asyncGeneratorStep(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep(a,n,o,i,u,"next",e)}function u(e){asyncGeneratorStep(a,n,o,i,u,"throw",e)}i(void 0)}))}}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FetchJs={})}(this,(function(e){"use strict";var t;function r(e,t){var r,n=new Uint8Array(t),o=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.set(i,o),o+=i.length}}catch(e){a.e(e)}finally{a.f()}return n}function n(e,n){var o,a="";if(!(o="string"==typeof e?e:(n=e).url))throw new Error("The url is invalid");var i=Object.assign(this.option,n),u=i.data,c=i.params;null!=c&&(a="?"+new URLSearchParams(c)),null!=u&&(Object.prototype.toString.call(u).includes("Object")?(i.body=JSON.stringify(u),i.headers["Content-Type"]=t.json):i.body=u);var s=i.controller||new AbortController;return i.signal=s.signal,setTimeout((function(){return function(e){e.abort()}(s)}),i.timeout),!o.startsWith("http")&&i.base&&(o=i.base+o),new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var u,c,s,f,l,d,p,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(o+a,i);case 3:if(!(u=e.sent).body){e.next=36;break}c=u.body.getReader(),s=[],f=+(u.headers.get("Content-Length")||0),l={total:f,loaded:0};case 9:return e.next=12,c.read();case 12:if(d=e.sent,p=d.done,y=d.value,!p){e.next=17;break}return e.abrupt("break",22);case 17:s.push(y),l.loaded+=y.length,i.onDownloadProgress&&i.onDownloadProgress(l),e.next=9;break;case 22:e.t0=i.responseType,e.next="blob"===e.t0?25:"arrayBuffer"===e.t0?27:"text"===e.t0?29:31;break;case 25:return b=new Blob(s),e.abrupt("break",33);case 27:return b=r(s,l.loaded).buffer,e.abrupt("break",33);case 29:return b=new TextDecoder("utf-8").decode(r(s,l.loaded)),e.abrupt("break",33);case 31:b=new TextDecoder("utf-8").decode(r(s,l.loaded));try{b=JSON.parse(b)}catch(e){}case 33:t(b),e.next=37;break;case 36:t(null);case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(0),console.log("e1",e.t1);case 42:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t,r){return e.apply(this,arguments)}}())}!function(e){e.json="application/json",e.formData="multipart/form-data",e.urlencoded="application/x-www-from-urlencoded"}(t||(t={}));var o=function e(t,r){return n.call(e,t,r)};o("",{}),o({}),o.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function e(t,r){return n.call(e,t,r)};return Object.keys(o).forEach((function(e){if("create"!==e){var r=o[e];t[e]=r}})),t.option=Object.assign(o.option,e),t};o.option={timeout:1e4,headers:{}},["get","post","put","delete","options","head","trace","connect"].forEach((function(e){o[e]=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.method=e,n.call(this,t,Object.assign(r,o))}})),e.default=o,Object.defineProperty(e,"__esModule",{value:!0})}));
